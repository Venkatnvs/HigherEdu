{% extends 'accounts/base.html' %}
{% load static %}
{% block title %} Register {% endblock %}
{% block content %}
<div class="row justify-content-center m-0 mb-3">
  <div class="col-md-4 justify-content-center text-center">
    <div class="row large-screen">
      <img class="img-fluid" height="350" width="350"
        src="{% static 'main/img/register_page_logo.png' %}"
        alt="">
      <div class="or-container">
        <div class="line-separator"></div>
        <div class="or-label">or</div>
        <div class="line-separator"></div>
      </div>
      <div class="row">
        <div class="col-md-12">
          <a class="btn btn-google btn-block text-uppercase btn-outline-primary" href="#"><img
              src="https://img.icons8.com/color/16/000000/google-logo.png"> Signup Using Google</a>
              <p class="text-center m-0 p-0 mt-1">Already have an account? <a href="{% url 'accounts-login' %}">Login</a></p>
        </div>
      </div>
      <div class="row mt-3 p-1">
        <img src="https://dummyimage.com/300x200/808080/ffffff.png" alt="">
      </div>
    </div>
    <div class="row small-screen">
      <div class="col-md-8 justify-content-center">
        <div class="card m-0">
          <div class="card-body m-0 p-1">
            <img class="img-fluid" height="90" width="90"
        src="{% static 'main/img/register_page_logo.png' %}"
        alt="">
            <div class="row">
              <div class="col-md-12">
                <a class="btn btn-google btn-block text-uppercase btn-outline-primary" href="#"><img
                    src="https://img.icons8.com/color/16/000000/google-logo.png"> Signup Using Google</a>
                    <p class="text-center m-0 p-0 mt-1">Already have an account? <a href="{% url 'accounts-login' %}">Login</a></p>
              </div>
            </div>
          </div>
        </div>
      </div>
      <div class="or-container my-2">
        <div class="line-separator"></div>
        <div class="or-label">or</div>
        <div class="line-separator"></div>
      </div>
    </div>
  </div>
  <div class="col-md-8 justify-content-center">
    <div class="card">
      <div class="card-title justify-content-center m-0 text-center p-2">
        <h3 class="m-0 p-0">Sign Up</h3>
      </div>
      <div class="card-body">
        <form action="{% url 'accounts-register' %}" method="post" enctype="multipart/form-data">
          {% csrf_token %}
          
          <h5 class="mb-1"><strong>Basic Information</strong></h5>

          <div class="row mt-1">
            <label class="col-sm-3 col-form-label" for="inputemail">Email address <span class="text-danger">*</span></label>
            <div class="col-sm-9">
              <input required type="email" name="email" placeholder="abc@gmail.com" class="form-control" id="inputemail"
              value="{{ FieldValues.email }}" />
              <div class="invalid-feedback invalid-email-feedback" style="display: none"></div>
              <p class="text-sm text-success email-success" style="display: none;"></p>
            </div>
          </div>

          <div class="row mt-1">
            <label class="col-sm-3 col-form-label" for="inputfullname">Full Name <span class="text-danger">*</span></label>
            <div class="col-sm-9">
              <input required type="text" name="fullname" placeholder="Fullname" class="form-control"
              id="inputfullname" value="{{ FieldValues.fullname }}" />
            </div>
          </div>

          <div class="row mt-1">
            <label class="col-sm-3 col-form-label" for="inputfullname">Gender <span class="text-danger">*</span></label>
            <div class="col-sm-9 d-flex">
              <div class="form-check my-1">
                <input class="form-check-input" type="radio" name="gender" id="inputgender_M" value="Male" required {% if FieldValues.gender == 'Male' %}checked{% endif %}>
                <label class="form-check-label" for="inputgender_M">
                  Male
                </label>
              </div>
              <div class="form-check mx-3 my-1">
                <input class="form-check-input" type="radio" name="gender" id="inputgender_F" value="Female" required {% if FieldValues.gender == 'Female' %}checked{% endif %}>
                <label class="form-check-label" for="inputgender_F">
                  Female
                </label>
              </div>
            </div>
          </div>

          <div class="row mt-1">
            <label for="inputmobile_no" class="col-sm-3 col-form-label">Mobile Number <span class="text-danger">*</span></label>
            <div class="col-sm-9">
              <input required type="tel" class="form-control" name="mobile_no" id="inputmobile_no" maxlength="18"
                value="{{ FieldValues.mobile_no_full }}">
            </div>
          </div>

          <div class="row mt-1">
            <label class="col-sm-3 col-form-label" for="inputpassword">Password <span class="text-danger">*</span> 
              <span class="nvs-tooltip" href="#" data-bs-toggle="tooltip" data-bs-placement="top"
                    data-bs-custom-class="custom-tooltip" data-bs-title="<strong>â˜…</strong> Password must contain atleast 8 characters." data-bs-html="true">
                    <span class="badge rounded-pill text-bg-warning">i</span>
                </span>
            </label>
            <div class="col-sm-9">
              <div class="input-group">
                <input id="inputpassword" type="password" class="form-control" placeholder="Password" required name="password">
                <span class="input-group-text">
                  <i toggle="#inputpassword" class="fa fa-fw toggle-password fa-eye"></i>
                </span>
              </div>
            </div>
          </div>

          <h5 class="mb-2 mt-3"><strong>Current Study Details</strong></h5>

          <div class="row mt-1">
            <label class="col-sm-3 col-form-label" for="inputusn_no">USN No. <span class="text-danger">*</span></label>
            <div class="col-sm-9">
              <input required type="text" name="usn_no" placeholder="Usn Number" maxlength="15" class="form-control"
              id="inputusn_no" value="{{ FieldValues.usn_no }}" />
            </div>
          </div>
          
          <div class="row mt-1">
            <label class="col-sm-3 col-form-label" for="inputcollege">College <span class="text-danger">*</span></label>
            <div class="col-sm-9">
              <select id="inputcollege" name="college" class="form-select" required>
                {% if FieldValues.college %}
                  <option selected>{{FieldValues.college}}</option>
                {% endif %}
              </select>
            </div>
          </div>

          <div class="row mt-1">
            <label class="col-sm-3 col-form-label" for="inputgraduation">Graduation Year <span class="text-danger">*</span></label>
            <div class="col-sm-9">
              <input required type="number" min="1900" max="2099" step="1" name="graduation" placeholder="Year" maxlength="15" class="form-control"
              id="inputgraduation" value="{{ FieldValues.graduation }}" />
            </div>
          </div>

          <h5 class="mb-2 mt-3"><strong>Future Study Details</strong></h5>

          <div class="row mt-1">
            <label class="col-sm-3 col-form-label" for="inputcountry">Country <span class="text-danger">*</span></label>
            <div class="col-sm-9">
              <select id="inputcountry" name="country" data-control="select2" class="form-select" required>
                {% if FieldValues.country %}
                  <option selected>{{FieldValues.country}}</option>
                {% endif %}
              </select>
            </div>
          </div>

          <div class="row mt-1">
            <label class="col-sm-3 col-form-label" for="inputcourse">Course <span class="text-danger">*</span></label>
            <div class="col-sm-9">
              <select id="inputcourse" name="course" data-control="select2" class="form-select" required>
                <option></option>
                <option>Undergraduate</option>
                <option>Postgraduate</option>
                <option>PHD</option>
                <option>Foundation</option>
                <option>A-Level</option>
                <option>Boarding School</option>
                <option>Diploma</option>
                <option>English Study (ELT/EFL)</option>
                <option>IB</option>
                <option>IELTS at SI-UK</option>
                <option>IGCSE</option>
                <option>Summer Course</option>
              </select>
            </div>
          </div>

          <div class="row mt-1">
            <label class="col-sm-3 col-form-label" for="inputabroad_year">Year of Study<span class="text-danger">*</span></label>
            <div class="col-sm-9">
              <input required type="number" min="1900" max="2099" step="1" name="abroad_year" placeholder="Year" maxlength="15" class="form-control"
              id="inputabroad_year" value="{{ FieldValues.abroad_year }}" />
            </div>
          </div>

          <div class="row mt-1">
            <label class="col-sm-3 col-form-label" for="inputseason">Season <span class="text-danger">*</span></label>
            <div class="col-sm-9">
              <select id="inputseason" name="season" data-control="select2" class="form-select" required>
                <option></option>
                <option value="fall">Fall Semester</option>
                <option value="spring">Spring Semester</option>
                <option value="summer">Summer Semester/Trimester</option>
                <option value="winter">Winter Semester/Trimester</option>
              </select>
            </div>
          </div>

          <div class="form-group mt-3">
            <div class="form-check">
              <input required class="form-check-input check_box_nvs" name="terms_cond" type="checkbox" id="gridCheck" {% if FieldValues.terms_cond == 'on' %}checked{% endif %}/>
              <label class="form-check-label" for="gridCheck">
                I agree all statements in <a target="_blank" href="{% url 'utils-terms-conds' %}" class="text-body"><u>Terms of service</u></a>
              </label>
            </div>
          </div>

          <button class="btn btn-default w-100 mt-3 submit-btn" type="submit">Submit</button>
          
        </form>
      </div>
    </div>
  </div>
  <div class="small-screen">
    <div class="row mt-1">
      <img src="https://dummyimage.com/300x200/808080/ffffff.png" alt="">
    </div>
  </div>
</div>
{% endblock content %}

{% block scripts %}
<script src="{% static 'accounts/js/email_auto_check.js' %}"></script>
<script>
  $(document).ready(function () {
      function serverSideFiltering(params, callback) {
        console.log(params)
        var xhr = new XMLHttpRequest();
        xhr.open('GET', '{% url "utils-college-list" %}?q=' + params.data.term, true);
        xhr.onload = function () {
          if (xhr.status === 200) {
            var data = JSON.parse(xhr.responseText);
            callback(data);
          }
        };
        xhr.send();
      }
      $('#inputcollege').select2({
        theme: 'bootstrap-5',
        ajax: {
          transport: serverSideFiltering,
          processResults: function (data) {
            return {
              results: $.map(data, function(college) {
                  return {
                      id: college,
                      text: college
                  };
              })
            };
          },
          cache: true
        },
        minimumInputLength: 2,
        placeholder: 'Search for College',
        tags: true,
      });

      $('#inputcountry').select2({
        theme: 'bootstrap-5',
        language: 'en',
        ajax: {
          url: '{% url "utils-country-list" %}',
          processResults: function (data) {
            return {
              results: $.map(data, function(country_name) {
                  return {
                      id: country_name,
                      text: country_name
                  };
              })
            };
          },
          cache: true
        },
        placeholder: 'Select a Country',
      });

      $('#inputcourse').select2({
        theme: 'bootstrap-5',
        language: 'en',
        //minimumResultsForSearch: Infinity,
        placeholder: 'Type of Study',
        tags:true,
      });

      $('#inputseason').select2({
        theme: 'bootstrap-5',
        language: 'en',
        minimumResultsForSearch: Infinity,
        placeholder: 'Semesters',
      });

      $('.select2-container--bootstrap-5 .select2-selection--single').addClass('form-control');
      $('.select2-container--default .select2-selection--single .select2-selection__arrow').addClass('btn btn-light');
      $('.select2-container--default .select2-selection--single .select2-selection__rendered').addClass('form-control');
    });
</script>
<script src="https://cdn.jsdelivr.net/npm/intl-tel-input@18.2.1/build/js/intlTelInput.min.js"></script>
<script>
  const input = document.querySelector("#inputmobile_no");
  window.intlTelInput(input, {
    separateDialCode: true,
    hiddenInput: "mobile_no_full",
    preferredCountries: ["in"],
    initialCountry: "auto",
    utilsScript: "https://cdn.jsdelivr.net/npm/intl-tel-input@18.2.1/build/js/utils.js",
  });
</script>
{% endblock scripts %}


{% block styles %}
<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/intl-tel-input@18.2.1/build/css/intlTelInput.css">
  <style>
  .btn-google {
    color: #545454;
    background-color: #ffffff;
    box-shadow: 0 1px 2px 1px #ddd;
  }
  .large-screen{
    display: block;
  }
  .small-screen{
    display: none;
  }
  @media screen and (max-width: 600px) {
    .large-screen{
      display: none;
    }
    .small-screen{
      display: block;
    }
    .container{
      padding: 1px !important;
    }
    .check_box_nvs{
      margin-right: 1px !important;
    }
  }
  </style>
{% endblock styles %}
  