{% load cmutils %}
 <aside id="sidebar" class="sidebar">

    <ul class="sidebar-nav" id="sidebar-nav">
      {% if user|has_permissions:'ctm_admin.view_dashboard' %}
      <li class="nav-item">
        <a class="nav-link" href="{% url 'ctm_admin-main' %}">
          <i class="bi bi-grid"></i>
          <span>Dashboard</span>
        </a>
      </li>
      {% endif %}

      {% if user|has_permissions:'accounts.view_customuser,accounts.view_userprofile' %}
      <li class="nav-item">
        <a class="nav-link collapsed" data-bs-target="#category" data-bs-toggle="collapse" href="#">
          <i class="fa-regular fa-user"></i><span>Users</span><i class="bi bi-chevron-down ms-auto"></i>
        </a>
        <ul id="category" class="nav-content collapse " data-bs-parent="#sidebar-nav">
          <li>
            <a href="{% url 'ctm_admin-all-users' %}">
              <i class="bi bi-circle"></i><span>All Users</span>
            </a>
          </li>
          {% if user|has_permissions:'accounts.add_customuser' %}
          <li>
            <a href="{% url 'ctm_admin-create-users' %}">
              <i class="bi bi-circle"></i><span>Add Users</span>
            </a>
          </li>
          {% endif %}
        </ul>
      </li>
      {% endif %}

      {% if user|has_permissions:'accounts.view_customuser' %}
      <li class="nav-item">
        <a class="nav-link collapsed" data-bs-target="#staffcategory" data-bs-toggle="collapse" href="#">
          <i class="fa-solid fa-users-gear"></i><span>Staff Users</span><i class="bi bi-chevron-down ms-auto"></i>
        </a>
        <ul id="staffcategory" class="nav-content collapse " data-bs-parent="#sidebar-nav">
          {% if user|has_permissions:'accounts.view_usertype' %}
          <li>
            <a href="{% url 'ctm_admin-usertype_list' %}">
              <i class="bi bi-circle"></i><span>Users Types</span>
            </a>
          </li>
          {% endif %}
          <li>
            <a href="{% url 'ctm_admin-staff-users' %}">
              <i class="bi bi-circle"></i><span>Staff Users</span>
            </a>
          </li>
          {% if user|has_permissions:'accounts.add_customuser' %}
          <li>
            <a href="{% url 'ctm_admin-create-users' %}">
              <i class="bi bi-circle"></i><span>Add Users</span>
            </a>
          </li>
          {% endif %}
        </ul>
      </li>
      {% endif %}

      {% if user|has_permissions_or:'ads.view_adsize,ads.view_adsbase' %}
      <li class="nav-item">
        <a class="nav-link collapsed" data-bs-target="#ads-cont" data-bs-toggle="collapse" href="#">
          <i class="fa-solid fa-bullhorn"></i></i><span>Ads</span><i class="bi bi-chevron-down ms-auto"></i>
        </a>
        <ul id="ads-cont" class="nav-content collapse " data-bs-parent="#sidebar-nav">
          {% if user|has_permissions:'ads.view_adsize' %}
          <li>
            <a href="{% url 'ctm_admin-ads_size_list_create' %}">
              <i class="bi bi-circle"></i><span>Ads Sizes</span>
            </a>
          </li>
          {% endif %}
          {% if user|has_permissions:'ads.view_adsbase' %}
          <li>
            <a href="{% url 'ctm_admin-ads-list-view' %}">
              <i class="bi bi-circle"></i><span>All Ads</span>
            </a>
          </li>
          {% endif %}
        </ul>
      </li>
      {% endif %}

      {% if user|has_permissions_or:'applies.view_foreignlanguageapplied,applies.view_foreignlanguage' %}
      <li class="nav-item">
        <a class="nav-link collapsed" data-bs-target="#applies-cont" data-bs-toggle="collapse" href="#">
          <i class="fa-solid fa-language"></i></i><span>Foreign Languages</span><i class="bi bi-chevron-down ms-auto"></i>
        </a>
        <ul id="applies-cont" class="nav-content collapse " data-bs-parent="#sidebar-nav">
          {% if user|has_permissions:'applies.view_foreignlanguageapplied' %}
          <li>
            <a href="{% url 'ctm_admin-foreign-languages-list' %}">
              <i class="bi bi-circle"></i><span>All Languages</span>
            </a>
          </li>
          {% endif %}
          {% for language in languages_sidebar_admin %}
            {% with permission_name='applies.view_'|add:language.name|slugify|add:"_lang" %}
              {% if user|has_permissions:permission_name %}
                <li>
                  <a href="{% url 'ctm_admin-foreign-languages-list-specific' language.name %}">
                    <i class="bi bi-circle"></i><span>{{ language.name }} Language</span>
                  </a>
                </li>
              {% endif %}
            {% endwith %}
          {% endfor %}
        </ul>
      </li>
      {% endif %}

      {% if user|has_permissions_or:'applies.view_competitivecourseapplied,applies.view_competitivecourse' %}
      <li class="nav-item">
        <a class="nav-link collapsed" data-bs-target="#applies-cont-comt" data-bs-toggle="collapse" href="#">
          <i class="fa-solid fa-book-open-reader"></i></i><span>Competitive Course</span><i class="bi bi-chevron-down ms-auto"></i>
        </a>
        <ul id="applies-cont-comt" class="nav-content collapse " data-bs-parent="#sidebar-nav">
          {% if user|has_permissions:'applies.view_competitivecourseapplied' %}
          <li>
            <a href="{% url 'ctm_admin-competitive-courses-list' %}">
              <i class="bi bi-circle"></i><span>All Courses</span>
            </a>
          </li>
          {% endif %}
          {% for course in courses_sidebar_admin %}
            {% with permission_name='applies.view_'|add:course.short_name|slugify|add:"_course" %}
              {% if user|has_permissions:permission_name %}
                <li>
                  <a href="{% url 'ctm_admin-competitive-courses-list-specific' course.short_name %}">
                    <i class="bi bi-circle"></i><span>{{ course.name }} Course</span>
                  </a>
                </li>
              {% endif %}
            {% endwith %}
          {% endfor %}
        </ul>
      </li>
      {% endif %}

      <li class="nav-heading">Pages</li>
      {% if user|has_permissions:'utils.view_contactus' %}
      <li class="nav-item">
        <a class="nav-link collapsed" href="{% url 'ctm_admin-contactus_list' %}">
          <i class="fa-regular fa-paper-plane"></i>
          <span>Contact Messages</span>
        </a>
      </li>
      {% endif %}
      <li class="nav-item">
        <a class="nav-link collapsed" href="{% url 'dashboard-profile' %}">
          <i class="bi bi-person"></i>
          <span>Profile</span>
        </a>
      </li>
    </ul>

  </aside>